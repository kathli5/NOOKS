<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>
    <%=address%>
  </title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <%- include("partials/imports.ejs") %>
</head>

<body>
  <%- include("partials/navbar.ejs") %>
    <section class="pagebody">

      <h1>
        <%= nook.name %>
      </h1>
      <p class="lead">
        <%= nook.address %>
      </p>
      <p>
        Rated <%= rating %>/5
          <% if (rating===0) { %>
            <i class="bi bi-star"></i>
            <i class="bi bi-star"></i>
            <i class="bi bi-star"></i>
            <i class="bi bi-star"></i>
            <i class="bi bi-star"></i>
            <% } else if (rating===1) { %>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star"></i>
              <i class="bi bi-star"></i>
              <i class="bi bi-star"></i>
              <i class="bi bi-star"></i>
              <% } else if (rating===2) { %>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star"></i>
                <i class="bi bi-star"></i>
                <i class="bi bi-star"></i>
                <% } else if (rating===3) { %>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star"></i>
                  <i class="bi bi-star"></i>
                  <% } else if (rating===4) { %>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star"></i>
                    <% } else if (rating===5) { %>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <i class="bi bi-star-fill"></i>
                      <% } %>
                    </p>


      <p class="nooktags">
        <% tags.forEach(elt=> { %>
          <small class="d-inline-flex mb-3 px-2 py-1 fw-semibold text-secondary-emphasis bg-secondary-subtle border border-secondary-subtle rounded-2"><%=elt%></small>
          <% }) %></p>

      <div class="carousel slide nookPhotoCarousel">
        <div class="carousel-inner">
          <% if (photos.length> 0) { %>
            <% photos.forEach(elt=> { %>
              <div class="carousel-item">
                <img src="<%= elt %>" class="d-block w-100 carouselPhotos" alt="Photo of <%= address %>">
              </div>
              <% }) %>
                <% } %>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target=".nookPhotoCarousel"
          data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target=".nookPhotoCarousel"
          data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <h2 class="mt-5 mb-3">Reviews</h2>

      <form method="GET" action="/get-review" class="float-right">
        <button type="submit" class="btn btn-success" name="nid" id="nid" value="<%= nook.nid %>">Add Review</button>
      </form>

      <ul class="list-group mt-3 reviewlist">
        <% reviews.forEach(elt=> { %>
          <li class="list-group-item d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
              <div class="fw-bold"><%=elt.username%></div>
              <%=elt.text%>
            </div>
            <span class="badge text-bg-primary rounded-pill"><%=elt.rating%>/5</span>
          </li>
          <% }) %>
      </ul><br>
    </section>
</body>

</html>